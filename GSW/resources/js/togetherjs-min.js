function _257686ea0df7f0438215b79587225af8cd5343a8(){};(function(){var a={dontShowClicks:false,cloneClicks:false,enableAnalytics:false,analyticsCode:"UA-35433268-28",hubBase:null,getUserName:null,getUserColor:null,getUserAvatar:null,siteName:null,useMinimizedCode:undefined,on:{},hub_on:{},enableShortcut:false,toolName:null,findRoom:null,autoStart:false,suppressJoinConfirmation:false,suppressInvite:false,inviteFromRoom:null,storagePrefix:"togetherjs",includeHashInUrl:false,disableWebRTC:false,youtube:true,ignoreMessages:["cursor-update","keydown","scroll-update"],ignoreForms:[":password"]};var d="/togetherjs/togetherjs.css";var b="https://togetherjs.com";if(b=="__baseUrl__"){b=""}var s="yes"=="__min__"?false:"yes"=="yes";var u=localStorage.getItem("togetherjs.baseUrlOverride");if(u){try{u=JSON.parse(u)}catch(x){u=null}if((!u)||u.expiresAt<Date.now()){localStorage.removeItem("togetherjs.baseUrlOverride")}else{b=u.baseUrl;var B=console.warn||console.log;B.call(console,"Using TogetherJS baseUrlOverride:",b);B.call(console,"To undo run: localStorage.removeItem('togetherjs.baseUrlOverride')")}}var z=localStorage.getItem("togetherjs.configOverride");if(z){try{z=JSON.parse(z)}catch(x){z=null}if((!z)||z.expiresAt<Date.now()){localStorage.removeItem("togetherjs.configOverride")}else{var l=false;for(var r in z){if(r=="expiresAt"||!z.hasOwnProperty(r)){continue}if(!l){console.warn("Using TogetherJS configOverride");console.warn("To undo run: localStorage.removeItem('togetherjs.configOverride')")}window["TogetherJSConfig_"+r]=z[r];console.log("Config override:",r,"=",z[r])}}}var h="unknown";var A="";if((!A)||A==""){A=Date.now()+""}else{h=A}if(typeof console=="undefined"){console={}}if(!console.log){console.log=function(){}}["debug","info","warn","error"].forEach(function(e){if(!console[e]){console[e]=console.log}});if(!b){var f=document.getElementsByTagName("script");for(var v=0;v<f.length;v++){var k=f[v].src;if(k&&k.search(/togetherjs.js(\?.*)?$/)!==-1){b=k.replace(/\/*togetherjs.js(\?.*)?$/,"");console.warn("Detected baseUrl as",b);break}else{if(k&&k.search(/togetherjs-min.js(\?.*)?$/)!==-1){b=k.replace(/\/*togetherjs-min.js(\?.*)?$/,"");console.warn("Detected baseUrl as",b);break}}}}if(!b){console.warn("Could not determine TogetherJS's baseUrl (looked for a <script> with togetherjs.js and togetherjs-min.js)")}function t(){var i=document.getElementById("togetherjs-stylesheet");if(!i){var e=document.createElement("link");e.id="togetherjs-stylesheet";e.setAttribute("rel","stylesheet");e.href=b+d+"?bust="+A;document.head.appendChild(e)}}function o(i){var e=document.createElement("script");e.src=b+i+"?bust="+A;document.head.appendChild(e)}var p=window.TogetherJS=function p(i){if(p.running){var G=p.require("session");G.close();return}p.startup.button=null;try{if(i&&typeof i=="object"){if(i.target&&typeof i){p.startup.button=i.target}else{if(i.nodeType==1){p.startup.button=i}else{if(i[0]&&i[0].nodeType==1){p.startup.button=i[0]}}}}}catch(E){console.warn("Error determining starting button:",E)}if(window.TowTruckConfig){console.warn("TowTruckConfig is deprecated; please use TogetherJSConfig");if(window.TogetherJSConfig){console.warn("Ignoring TowTruckConfig in favor of TogetherJSConfig")}else{window.TogetherJSConfig=TowTruckConfig}}if(window.TogetherJSConfig&&(!window.TogetherJSConfig.loaded)){p.config(window.TogetherJSConfig);window.TogetherJSConfig.loaded=true}var F;var H;var I={};for(F in window){if(F.indexOf("TogetherJSConfig_on_")===0){H=F.substr(("TogetherJSConfig_on_").length);I[H]=window[F]}else{if(F.indexOf("TogetherJSConfig_")===0){H=F.substr(("TogetherJSConfig_").length);p.config(H,window[F])}else{if(F.indexOf("TowTruckConfig_on_")===0){H=F.substr(("TowTruckConfig_on_").length);console.warn("TowTruckConfig_* is deprecated, please rename",F,"to TogetherJSConfig_on_"+H);I[H]=window[F]}else{if(F.indexOf("TowTruckConfig_")===0){H=F.substr(("TowTruckConfig_").length);console.warn("TowTruckConfig_* is deprecated, please rename",F,"to TogetherJSConfig_"+H);p.config(H,window[F])}}}}}var J=p.config.get("on");for(F in I){if(I.hasOwnProperty(F)){J[F]=I[F]}}p.config("on",J);for(F in J){p.on(F,J[F])}var m=p.config.get("hub_on");if(m){for(F in m){if(m.hasOwnProperty(F)){p.hub.on(F,m[F])}}}if(!p.startup.reason){p.startup.reason="started"}if(p._loaded){var G=p.require("session");t();G.start();return}p.startup._launch=true;t();var C=p.config.get("useMinimizedCode");p.config.close("useMinimizedCode");if(C!==undefined){s=!!C}var D=p._extend(p.requireConfig);var L=["session","jquery"];function K(M,e){p._loaded=true;if(!s){p.require=require.config({context:"togetherjs"});p._requireObject=require}}if(!s){if(typeof require=="function"){if(!require.config){console.warn("The global require (",require,") is not requirejs; please use togetherjs-min.js");throw new Error("Conflict with window.require")}p.require=require.config(D)}}if(typeof p.require=="function"){p.require(L,K)}else{D.deps=L;D.callback=K;if(!s){window.require=D}}if(s){o("/togetherjs/togetherjsPackage.js")}else{o("/togetherjs/libs/require.js")}};p.pageLoaded=Date.now();p._extend=function(m,i){if(!i){i=m;m={}}for(var e in i){if(i.hasOwnProperty(e)){m[e]=i[e]}}return m};p._startupInit={button:null,reason:null,continued:false,_joinShareId:null,_launch:false};p.startup=p._extend(p._startupInit);p.running=false;p.requireConfig={context:"togetherjs",baseUrl:b+"/togetherjs",urlArgs:"bust="+A,paths:{jquery:"libs/jquery-1.8.3.min",walkabout:"libs/walkabout/walkabout",esprima:"libs/walkabout/lib/esprima",falafel:"libs/walkabout/lib/falafel",tinycolor:"libs/tinycolor",whrandom:"libs/whrandom/random"}};p._mixinEvents=function(C){C.on=function e(F,H){if(typeof H!="function"){console.warn("Bad callback for",this,".once(",F,", ",H,")");throw"Error: .once() called with non-callback"}if(F.search(" ")!=-1){var G=F.split(/ +/g);G.forEach(function(I){this.on(I,H)},this);return}if(this._knownEvents&&this._knownEvents.indexOf(F)==-1){var E=""+this;if(E.length>20){E=E.substr(0,20)+"..."}console.warn(E+".on('"+F+"', ...): unknown event");if(console.trace){console.trace()}}if(!this._listeners){this._listeners={}}if(!this._listeners[F]){this._listeners[F]=[]}if(this._listeners[F].indexOf(H)==-1){this._listeners[F].push(H)}};C.once=function m(G,H){if(typeof H!="function"){console.warn("Bad callback for",this,".once(",G,", ",H,")");throw"Error: .once() called with non-callback"}var F="onceCallback_"+G;if(!H[F]){H[F]=function E(){H.apply(this,arguments);this.off(G,E);delete H[F]}}this.on(G,H[F])};C.off=C.removeListener=function D(G,J){if(this._listenerOffs){this._listenerOffs.push([G,J]);return}if(G.search(" ")!=-1){var I=G.split(/ +/g);I.forEach(function(K){this.off(K,J)},this);return}if((!this._listeners)||!this._listeners[G]){return}var F=this._listeners[G],E=F.length;for(var H=0;H<E;H++){if(F[H]==J){F.splice(H,1);break}}};C.emit=function i(G){var H=this._listenerOffs=[];if((!this._listeners)||!this._listeners[G]){return}var F=Array.prototype.slice.call(arguments,1);var E=this._listeners[G];E.forEach(function(I){I.apply(this,F)},this);delete this._listenerOffs;if(H.length){H.forEach(function(I){this.off(I[0],I[1])},this)}};return C};p._teardown=function(){var e=p._requireObject||window.require;if(e.s&&e.s.contexts){delete e.s.contexts.togetherjs}p._loaded=false;p.startup=p._extend(p._startupInit);p.running=false};p._mixinEvents(p);p._knownEvents=["ready","close"];p.toString=function(){return"TogetherJS"};var w="https://hub.togetherjs.com";if(w=="__hubUrl__"){w="https://hub.togetherjs.mozillalabs.com"}a.hubBase=w;p._configuration={};p._defaultConfiguration=a;p._configTrackers={};p._configClosed={};p.config=function(m,J){var C;if(arguments.length==1){if(typeof m!="object"){throw new Error("TogetherJS.config(value) must have an object value (not: "+m+")")}C=m}else{C={};C[m]=J}var D;var L;for(var I in C){if(C.hasOwnProperty(I)){if(p._configClosed[I]&&p.running){throw new Error("The configuration "+I+" is finalized and cannot be changed")}}}for(var I in C){if(!C.hasOwnProperty(I)){continue}if(I=="loaded"||I=="callToStart"){continue}if(!p._defaultConfiguration.hasOwnProperty(I)){console.warn("Unknown configuration value passed to TogetherJS.config():",I)}var G=p._configuration[I];var K=C[I];p._configuration[I]=K;var F=p._configTrackers[m]||[];var E=false;for(D=0;D<F.length;D++){try{L=F[D];L(K,G)}catch(H){console.warn("Error setting configuration",m,"to",K,":",H,"; reverting to",G);E=true;break}}if(E){p._configuration[I]=G;for(D=0;D<F.length;D++){try{L=F[D];L(K)}catch(H){console.warn("Error REsetting configuration",m,"to",G,":",H,"(ignoring)")}}}}};p.config.get=function(e){var i=p._configuration[e];if(i===undefined){if(!p._defaultConfiguration.hasOwnProperty(e)){console.error("Tried to load unknown configuration value:",e)}i=p._defaultConfiguration[e]}return i};p.config.track=function(e,i){if(!p._defaultConfiguration.hasOwnProperty(e)){throw new Error("Configuration is unknown: "+e)}i(p.config.get(e));if(!p._configTrackers[e]){p._configTrackers[e]=[]}p._configTrackers[e].push(i);return i};p.config.close=function(e){if(!p._defaultConfiguration.hasOwnProperty(e)){throw new Error("Configuration is unknown: "+e)}p._configClosed[e]=true};p.reinitialize=function(){if(p.running&&typeof p.require=="function"){p.require(["session"],function(e){e.emit("reinitialize")})}};p.refreshUserData=function(){if(p.running&&typeof p.require=="function"){p.require(["session"],function(e){e.emit("refresh-user-data")})}};p.version=h;p.baseUrl=b;p.hub=p._mixinEvents({});p._onmessage=function(i){var e=i.type;if(e.search(/^app\./)===0){e=e.substr("app.".length)}else{e="togetherjs."+e}i.type=e;p.hub.emit(i.type,i)};p.send=function(i){if(!p.require){throw"You cannot use TogetherJS.send() when TogetherJS is not running"}var e=p.require("session");e.appSend(i)};p.shareUrl=function(){if(!p.require){return null}var e=p.require("session");return e.shareUrl()};var g=null;p.listenForShortcut=function(){console.warn("Listening for alt-T alt-T to start TogetherJS");p.removeShortcut();e=function e(i){if(i.which==84&&i.altKey){if(e.pressed){p()}else{e.pressed=true}}else{e.pressed=false}};p.once("ready",p.removeShortcut);document.addEventListener("keyup",e,false)};p.removeShortcut=function(){if(g){document.addEventListener("keyup",g,false);g=null}};p.config.track("enableShortcut",function(e,i){if(e){p.listenForShortcut()}else{if(i){p.removeShortcut()}}});p.checkForUsersOnChannel=function(m,C){if(m.search(/^https?:/i)===0){m=m.replace(/^http/i,"ws")}var i=new WebSocket(m);var e=false;i.onmessage=function(D){var E=JSON.parse(D.data);if(E.type!="init-connection"){console.warn("Got unexpected first message (should be init-connection):",E);return}if(e){console.warn("Somehow received two responses from channel; ignoring second");i.close();return}e=true;i.close();C(E.peerCount)};i.onclose=i.onerror=function(){if(!e){console.warn("Socket was closed without receiving answer");e=true;C(undefined)}}};var c=location.hash.replace(/^#/,"");var q=/&?togetherjs=([^&]*)/.exec(c);if(q){p.startup._joinShareId=q[1];p.startup.reason="joined";var n=c.substr(0,q.index)+c.substr(q.index+q[0].length);location.hash=n}if(window._TogetherJSShareId){p.startup._joinShareId=window._TogetherJSShareId;delete window._TogetherJSShareId}function j(){if(window.TogetherJSConfig_noAutoStart){return}var e=window.TogetherJSConfig_callToStart;if(!e&&window.TowTruckConfig_callToStart){e=window.TowTruckConfig_callToStart;console.warn("Please rename TowTruckConfig_callToStart to TogetherJSConfig_callToStart")}if(window.TogetherJSConfig&&window.TogetherJSConfig.callToStart){e=window.TogetherJSConfig.callToStart}if(e){e(y)}else{y()}}function y(){if(p.startup._joinShareId){p()}else{if(window._TogetherJSBookmarklet){delete window._TogetherJSBookmarklet;p()}else{var e="togetherjs-session.status";var i=sessionStorage.getItem(e);if(i){i=JSON.parse(i);if(i&&i.running){p.startup.continued=true;p.startup.reason=i.startupReason;p()}}else{if(window.TogetherJSConfig_autoStart||(window.TogetherJSConfig&&window.TogetherJSConfig.autoStart)){p.startup.reason="joined";p()}}}}}j();if(window.TogetherJSConfig_enableShortcut){p.listenForShortcut()}window.TowTruck=p})();