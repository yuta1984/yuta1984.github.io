function _2c747c914b24c5c8e3f3981b886d694a0ef680d9(){};!function(af){function M(c,a){for(var b in ae){a?c.prototype[b]=ab(ae[b]):c[b]=ae[b]}return c}function ab(a){return function(b){return a(this,b)}}function Q(){if(!(this instanceof Q)){return new Q}for(var a in ag){this[a]=ag[a]}}function O(a){if(!(this instanceof O)){return new O(a)}if(a=a||{},this._lexer=a.lexer||new Q,this._blankNodes=Object.create(null),this._blankNodeCount=0,this._tripleStack=[],a.documentURI){if(a.documentURI.indexOf("#")>0){throw new Error("Invalid document URI")}this._baseURI=a.documentURI,this._baseURIPath=this._baseURI.replace(D,""),this._baseURIRoot=this._baseURI.match(ad)[0]}else{this._baseURI=null,this._baseURIPath=null}}function W(b,a){return this instanceof W?(b&&"function"!=typeof b.write&&(a=b,b=null),b||(b=this,this._output="",this.write=function(f,d,c){this._output+=f,c&&c()}),this._outputStream=b,this._prefixURIs=Object.create(null),void (a&&this.addPrefixes(a))):new W(b,a)}function K(b,a){return this instanceof K?(this._size=0,this._contexts=Object.create(null),this._entities=Object.create(null),this._entities[">>____unused_item_to_make_first_entity_key_non-falsy____<<"]=0,this._entityCount=0,this._blankNodeIndex=0,a||!b||b[0]||(a=b,b=null),this._prefixes=Object.create(null),b&&this.addTriples(b),void (a&&this.addPrefixes(a))):new K(b,a)}var aj="http://www.w3.org/2001/XMLSchema#string",ah="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",ae={isUri:function(b){if(!b){return b}var a=b[0];return'"'!==a&&"_"!==a},isLiteral:function(a){return a&&'"'===a[0]},isBlank:function(a){return a&&"_:"===a.substr(0,2)},getLiteralValue:function(b){var a=/^"((?:.|\n|\r)*)"/.exec(b);if(!a){throw new Error(b+" is not a literal")}return a[1]},getLiteralType:function(b){var a=/^"(?:.|\n|\r)*"(?:\^\^(.+)|(@)[\-a-z]+)?$/i.exec(b);if(!a){throw new Error(b+" is not a literal")}return a[1]||(a[2]?ah:aj)},getLiteralLanguage:function(b){var a=/^"(?:.|\n|\r)*"(?:@([\-a-z]+)|\^\^.+)?$/i.exec(b);if(!a){throw new Error(b+" is not a literal")}return a[1]?a[1].toLowerCase():""},isPrefixedName:function(a){return a&&/^[^:\/"']*:[^:\/"']+$/.test(a)},expandPrefixedName:function(f,b){var a=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]/.exec(f);if(!a){return f}var d=a[1],c=b[d],g=a.index;if(void 0===c){throw new Error("Unknown prefix: "+d)}return 0===g?c+f.substr(d.length+1):f.substr(0,g+3)+c+f.substr(g+d.length+4)}};af.Util=M(M);var ag={_iri:/^<((?:[^\x00-\x20<>\\"\{\}\|\^\`]|\\[uU])*)>/,_string:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\.\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=\s|<)/,_prefixedName:/^((?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\.\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=[\s;,)#]|\.[\s#\(\[<"'])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d+\.\d+|\.\d+|\d+)(?=\s*[\s\.;,)#])/,_boolean:/^(?:true|false)(?=[\s#,;.])/,_dot:/^\.(?!\d)/,_punctuation:/^[;,\[\]\(\)]/,_fastString:/^"[^"\\]+"(?=[^"\\])/,_keyword:/^@[a-z]+(?=\s)/,_sparqlKeyword:/^(?:PREFIX|BASE)(?=\s)/i,_type:/^\^\^(?:<([^>]*)>|([A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd][\-0-9A-Z_a-z\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]*)?:([A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd][\-0-9A-Z_a-z\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]*)(?=[\s\.;,)#]))/,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_nonwhitespace:/^\S*/,_endOfFile:/^(?:#[^\n\r]*)?$/},V=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,Y={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},ac=/[\x00-\x20<>\\"\{\}\|\^\`]/,ak=String.fromCharCode,S={".":"dot",";":"semicolon",",":"comma","[":"bracketopen","]":"bracketclose","(":"liststart",")":"listend"},ai="function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)};Q.prototype={_tokenizeToEnd:function(j,o){function g(a){k=a._nonwhitespace.exec(b),a._input=null,j(new Error('Syntax error: unexpected "'+k[0]+'" on line '+a._line+"."))}for(var b=this._input;;){for(var p;p=this._newline.exec(b);){b=b.substr(p[0].length,b.length),this._line++}(p=this._whitespace.exec(b))&&(b=b.substr(p[0].length,b.length));var d={line:this._line,type:"",value:"",prefix:""};if(this._endOfFile.test(b)){return o&&(b=null,d.type="eof",j(null,d)),this._input=b}var m,l=b[0],k=null,h=!1;switch(l){case"<":if(k=this._iri.exec(b)){if(m=this._unescape(k[1]),null===m||ac.test(m)){return g(this)}d.type="IRI",d.value=m}break;case'"':case"'":if(k=this._fastString.exec(b)){d.type="literal",d.value=k[0]}else{if(k=this._string.exec(b)){if(m=this._unescape(k[0]),null===m){return g(this)}d.type="literal",d.value=m.replace(/^'|'$/g,'"')}else{if(k=this._tripleQuotedString.exec(b)){if(m=k[1]||k[2],this._line+=m.split(/\r\n|\r|\n/).length-1,m=this._unescape(m),null===m){return g(this)}d.type="literal",d.value=m.replace(/^'|'$/g,'"')}}}break;case"@":"literal"===this._prevTokenType&&(k=this._langcode.exec(b))?(d.type="langcode",d.value=k[1]):(k=this._keyword.exec(b))&&(d.type=k[0]);break;case"^":(k=this._type.exec(b))&&(d.type="type",k[2]?(d.prefix=k[2],d.value=k[3]):d.value=k[1]);break;case".":if(k=this._dot.test(b)){d.type="dot",k=["."];break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(k=this._number.exec(b))&&(d.type="literal",d.value='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(k[1]?"double":/^[+\-]?\d+$/.test(k[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":(k=this._sparqlKeyword.exec(b))?d.type=k[0].toUpperCase():h=!0;break;case"f":case"t":(k=this._boolean.exec(b))?(d.type="literal",d.value='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):h=!0;break;case"a":(k=this._shortPredicates.exec(b))?(d.type="abbreviation",d.value="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):h=!0;break;case",":case";":case"[":case"]":case"(":case")":k=this._punctuation.exec(l),d.type=S[l];break;default:h=!0}if(h&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(k=this._prefix.exec(b))?((k=this._prefixedName.exec(b))||o&&(k=this._prefixedName.exec(b+" ")))&&(d.type="prefixed",d.prefix=k[1]||"",d.value=this._unescape(k[2])):(d.type="prefix",d.value=k[1]||"")),null===k){return o||!/^'''|^"""/.test(b)&&/\n|\r/.test(b)?g(this):this._input=b}j(null,d),this._prevTokenType=d.type,b=b.substr(k[0].length,b.length)}},_unescape:function(b){try{return b.replace(V,function(h,d,c,g){var f;if(d){if(f=parseInt(d,16),isNaN(f)){throw new Error}return ak(f)}if(c){if(f=parseInt(c,16),isNaN(f)){throw new Error}return 65535>f?ak(f):ak(55296+((f-=65536)>>10),56320+(1023&f))}var j=Y[g];if(!j){throw new Error}return j})}catch(a){return null}},tokenize:function(f,b){function a(g){null!==c._input&&(c._input+=g,c._tokenizeToEnd(b,!1))}function d(){null!==c._input&&c._tokenizeToEnd(b,!0)}var c=this;this._line=1,"string"==typeof f?(this._input=f,ai(function(){c._tokenizeToEnd(b,!0)})):(this._input="",f&&"function"!=typeof f?("function"==typeof f.setEncoding&&f.setEncoding("utf8"),f.on("data",a),f.on("end",d)):(this.addChunk=a,this.end=d,b||(b=f)))}},af.Lexer=Q;var G,Q=Q,J="http://www.w3.org/1999/02/22-rdf-syntax-ns#",aa=J+"nil",H=J+"first",Z=J+"rest",F=/^[a-z]+:/,D=/[^\/]*$/,ad=/^(?:[a-z]+:\/*)?[^\/]*/,A=function(){};O.prototype={_readInTopContext:function(a){switch(a.type){case"eof":return this._callback(null,null,this._prefixes);case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseURI;case"BASE":return this._sparqlStyle=!0,this._readBaseURI;default:return this._readSubject(a)}},_readSubject:function(b){switch(b.type){case"IRI":this._subject=null===this._baseURI||F.test(b.value)?b.value:this._resolveURI(b.value);break;case"prefixed":if("_"===b.prefix){this._subject=this._blankNodes[b.value]||(this._blankNodes[b.value]="_:b"+this._blankNodeCount++)}else{var a=this._prefixes[b.prefix];if(a===G){return this._error('Undefined prefix "'+b.prefix+':"',b)}this._subject=a+b.value}break;case"bracketopen":return this._subject="_:b"+this._blankNodeCount++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"liststart":return this._tripleStack.push({subject:aa,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;default:return this._error("Expected subject but got "+b.type,b)}return this._subjectHasPredicate=!1,this._readPredicate},_readPredicate:function(b){switch(b.type){case"IRI":case"abbreviation":this._predicate=null===this._baseURI||F.test(b.value)?b.value:this._resolveURI(b.value);break;case"prefixed":if("_"===b.prefix){return this._error("Disallowed blank node as predicate",b)}var a=this._prefixes[b.prefix];if(a===G){return this._error('Undefined prefix "'+b.prefix+':"',b)}this._predicate=a+b.value;break;case"bracketclose":return this._readBlankNodeTail(b,!0);case"dot":return this._subjectHasPredicate?this._readPunctuation(b,!0):this._error("Unexpected dot",b);case"semicolon":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',b)}return this._subjectHasPredicate=!0,this._readObject},_readObject:function(c){switch(c.type){case"IRI":this._object=null===this._baseURI||F.test(c.value)?c.value:this._resolveURI(c.value);break;case"prefixed":if("_"===c.prefix){this._object=this._blankNodes[c.value]||(this._blankNodes[c.value]="_:b"+this._blankNodeCount++)}else{var b=this._prefixes[c.prefix];if(b===G){return this._error('Undefined prefix "'+c.prefix+':"',c)}this._object=b+c.value}break;case"literal":return this._object=c.value,this._readDataTypeOrLang;case"bracketopen":var a="_:b"+this._blankNodeCount++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:"blank"}),this._subject=a,this._readBlankNodeHead;case"liststart":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:aa,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',c)}return this._getTripleEndReader()},_readBlankNodeHead:function(a){return"bracketclose"===a.type?this._readBlankNodeTail(a,!0):this._readPredicate(a)},_readBlankNodeTail:function(c,b){if("bracketclose"!==c.type){return this._readPunctuation(c)}b!==!0&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,context:"n3/contexts#default"});var a=this._tripleStack.pop();return this._subject=a.subject,null!==a.object?(this._predicate=a.predicate,this._object=a.object,this._getTripleEndReader()):this._readPredicate},_readDataTypeOrLang:function(c){switch(c.type){case"type":var b;if(""===c.prefix){b=c.value}else{var a=this._prefixes[c.prefix];if(a===G){return this._error('Undefined prefix "'+c.prefix+':"',c)}b=a+c.value}return this._object+="^^"+b,this._getTripleEndReader();case"langcode":return this._object+="@"+c.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,c)}},_readListItem:function(j){var f=null,d=null,h=this._subject,g=this._tripleStack,k=g[g.length-1],c=this._readListItem;switch(j.type){case"IRI":f=j.value;break;case"prefixed":if("_"===j.prefix){f=this._blankNodes[j.value]||(this._blankNodes[j.value]="_:b"+this._blankNodeCount++)}else{var b=this._prefixes[j.prefix];if(b===G){return this._error('Undefined prefix "'+j.prefix+':"',j)}f=b+j.value}break;case"literal":f=j.value,c=this._readDataTypeOrLang;break;case"bracketopen":d="_:b"+this._blankNodeCount++,f="_:b"+this._blankNodeCount++,g.push({subject:d,predicate:H,object:f,type:"blank"}),this._subject=f,c=this._readBlankNodeHead;break;case"liststart":d="_:b"+this._blankNodeCount++,g.push({subject:d,predicate:H,object:aa,type:"list"}),this._subject=null,c=this._readListItem;break;case"listend":if(g.pop(),0!==g.length&&"list"===g[g.length-1].type&&this._callback(null,{subject:k.subject,predicate:k.predicate,object:k.object,context:"n3/contexts#default"}),this._subject=k.subject,null===k.predicate){if(c=this._readPredicate,k.subject===aa){return c}}else{if(this._predicate=k.predicate,this._object=k.object,c=this._getTripleEndReader(),k.object===aa){return c}}d=aa;break;default:return this._error('Expected list item instead of "'+j.type+'"',j)}return null===d&&(this._subject=d="_:b"+this._blankNodeCount++),null===h?k.object===aa?k.object=d:k.subject=d:this._callback(null,{subject:h,predicate:Z,object:d,context:"n3/contexts#default"}),null!==f&&this._callback(null,{subject:d,predicate:H,object:f,context:"n3/contexts#default"}),c},_readPunctuation:function(c,b){var a;switch(c.type){case"dot":a=this._readInTopContext;break;case"semicolon":a=this._readPredicate;break;case"comma":a=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',c)}return b||this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,context:"n3/contexts#default"}),a},_readPrefix:function(a){return"prefix"!==a.type?this._error("Expected prefix to follow @prefix",a):(this._prefix=a.value,this._readPrefixURI)},_readPrefixURI:function(b){if("IRI"!==b.type){return this._error('Expected IRI to follow prefix "'+this._prefix+':"',b)}var a;return a=null===this._baseURI||F.test(b.value)?b.value:this._resolveURI(b.value),this._prefixes[this._prefix]=a,this._prefixCallback(this._prefix,a),this._readDeclarationPunctuation},_readBaseURI:function(a){return"IRI"!==a.type?this._error("Expected IRI to follow base declaration",a):a.value.indexOf("#")>0?this._error("Invalid base URI",a):(this._baseURI=null===this._baseURI||F.test(a.value)?a.value:this._resolveURI(a.value),this._baseURIPath=this._baseURI.replace(D,""),this._baseURIRoot=this._baseURI.match(ad)[0],this._readDeclarationPunctuation)},_readDeclarationPunctuation:function(a){return this._sparqlStyle?this._readInTopContext(a):"dot"!==a.type?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_getTripleEndReader:function(){var a=this._tripleStack;if(0===a.length){return this._readPunctuation}switch(a[a.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(b,a){this._callback(new Error(b+" at line "+a.line+"."))},_resolveURI:function(a){switch(a[0]){case void 0:return this._baseURI;case"#":return this._baseURI+a;case"?":return this._baseURI.replace(/(?:\?.*)?$/,a);case"/":return this._baseURIRoot+a;default:return this._baseURIPath+a}},parse:function(d,b,a){this._readCallback=this._readInTopContext,this._prefixes={},"function"==typeof d&&(a=b,b=d,d=null),this._callback=b||A,this._prefixCallback=a||A;var c=this;this._lexer.tokenize(d,function(g,f){c._readCallback!==G&&(null!==g?c._callback(g):c._readCallback=c._readCallback(f))}),d||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},af.Parser=O;var q=/^"((?:.|\n|\r)*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,J="http://www.w3.org/1999/02/22-rdf-syntax-ns#",X=J+"type",B=/["\\\t\n\r\b\f]/,z=/["\\\t\n\r\b\f]/g,C={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};W.prototype={_write:function(){for(var b=0,a=arguments.length-2;a>=b;b++){this._outputStream.write(arguments[b],"utf8",b===a?arguments[a+1]:null)}},_writeUriOrBlankNode:function(d,b){if(/^_:/.test(d)){return this._write(d,b)}var a,c=d.match(/^(.*[#\/])([a-z][\-_a-z0-9]*)$/i);return c&&(a=this._prefixURIs[c[1]])?this._write(a,c[2],b):void this._write("<",d,">",b)},_writeLiteral:function(d,b,a,c){B.test(d)&&(d=d.replace(z,function(f){return C[f]})),this._write('"',d,'"',b||a?null:c),b?(this._write("^^",null),this._writeUriOrBlankNode(b,c)):a&&this._write("@",a,c)},_writeSubject:function(b,a){if('"'===b[0]){throw new Error("A literal as subject is not allowed: "+b)}this._writeUriOrBlankNode(b,a)},_writePredicate:function(b,a){if('"'===b[0]){throw new Error("A literal as predicate is not allowed: "+b)}b===X?this._write("a",a):this._writeUriOrBlankNode(b,a)},_writeObject:function(c,b){var a=q.exec(c);null!==a?this._writeLiteral(a[1],a[2],a[3],b):this._writeUriOrBlankNode(c,b)},addTriple:function(f,b,a,d){a||(d=b,a=f.object,b=f.predicate,f=f.subject);try{this._prevSubject===f?this._prevPredicate===b?this._write(", ",null):(this._write(";\n    ",null),this._writePredicate(b),this._write(" ",null),this._prevPredicate=b):(this._prevSubject&&this._write(".\n",null),this._writeSubject(f),this._write(" ",null),this._writePredicate(b),this._write(" ",null),this._prevSubject=f,this._prevPredicate=b),this._writeObject(a,d)}catch(c){d&&d(c)}},addTriples:function(b){for(var a=0;a<b.length;a++){this.addTriple(b[a])}},addPrefix:function(c,b,a){/[#\/]$/.test(b)&&(this._prefixURIs[b]=c+":",this._write("@prefix ",c,": <",b,">.\n",a))},addPrefixes:function(c,b){for(var a in c){this.addPrefix(a,c[a])}this._write("\n",b)},end:function(c){if(this._prevSubject&&(this._write(".\n",null),delete this._prevSubject),this===this._outputStream){return c&&c(null,this._output)}var b=c&&function(){b=null,c()};try{this._outputStream.end(b)}catch(a){b&&b()}}},af.Writer=W;var L=ae.expandPrefixedName;K.prototype={get defaultContextfunction(){return"n3/contexts#default"},get sizefunction(){var g=this._size;if(null!==g){return g}var c,b,f=this._contexts;for(var d in f){for(var h in c=f[d].subjects){for(var a in b=c[h]){g+=Object.keys(b[a]).length}}}return this._size=g},_addToIndex:function(f,b,a,d){var c=f[b]||(f[b]={}),g=c[a]||(c[a]={});g[d]=null},_removeFromIndex:function(g,c,b,f){var d,h=g[c],a=h[b];delete a[f];for(d in a){return}delete h[b];for(d in h){return}delete g[c]},_findInIndex:function(an,w,U,E,y,P,m,ar){var ap,am,ao,N=[],R=Object.keys(this._entities);w&&((ap=an,an={})[w]=ap[w]);for(var al in an){var at=R[al];if(am=an[al]){U&&((ap=am,am={})[U]=ap[U]);for(var I in am){var aq=R[I];if(ao=am[I]){for(var g=(E?E in ao?[E]:[]:Object.keys(ao)),k=g.length-1;k>=0;k--){var T={context:ar};T[y]=at,T[P]=aq,T[m]=R[g[k]],N.push(T)}}}}}return N},_countInIndex:function(j,o,g,b){var p,d,m,l=0;o&&((p=j,j={})[o]=p[o]);for(var k in j){if(d=j[k]){g&&((p=d,d={})[g]=p[g]);for(var h in d){(m=d[h])&&(b?b in m&&l++:l+=Object.keys(m).length)}}}return l},addTriple:function(f,b,a,d){b||(d=f.context,a=f.object,b=f.predicate,f=f.subject),d=d||this.defaultContext;var c=this._contexts[d];c||(c=this._contexts[d]={subjects:{},predicates:{},objects:{}},Object.freeze(c));var g=this._entities;f=g[f]||(g[f]=++this._entityCount),b=g[b]||(g[b]=++this._entityCount),a=g[a]||(g[a]=++this._entityCount),this._addToIndex(c.subjects,f,b,a),this._addToIndex(c.predicates,b,a,f),this._addToIndex(c.objects,a,f,b),this._size=null},addTriples:function(b){for(var a=b.length-1;a>=0;a--){this.addTriple(b[a])}},addPrefix:function(b,a){this._prefixes[b]=a},addPrefixes:function(b){for(var a in b){this.addPrefix(a,b[a])}},removeTriple:function(g,l,f,b){l||(b=g.context,f=g.object,l=g.predicate,g=g.subject),b=b||this.defaultContext;var m,d=this._entities,k=this._contexts;if((g=d[g])&&(l=d[l])&&(f=d[f])&&(m=k[b])){var j,h;if((j=m.subjects[g])&&(h=j[l])&&f in h){this._removeFromIndex(m.subjects,g,l,f),this._removeFromIndex(m.predicates,l,f,g),this._removeFromIndex(m.objects,f,g,l),null!==this._size&&this._size--;for(g in m.subjects){return}delete k[b]}}},removeTriples:function(b){for(var a=b.length-1;a>=0;a--){this.removeTriple(b[a])}},find:function(f,b,a,d){var c=this._prefixes;return this.findByUri(L(f,c),L(b,c),L(a,c),L(d,c))},findByUri:function(f,b,a,d){d=d||this.defaultContext;var c=this._contexts[d],g=this._entities;return c?f&&!(f=g[f])?[]:b&&!(b=g[b])?[]:a&&!(a=g[a])?[]:f?a?this._findInIndex(c.objects,a,f,b,"object","subject","predicate",d):this._findInIndex(c.subjects,f,b,a,"subject","predicate","object",d):b?this._findInIndex(c.predicates,b,a,f,"predicate","object","subject",d):this._findInIndex(c.objects,a,f,b,"object","subject","predicate",d):[]},count:function(f,b,a,d){var c=this._prefixes;return this.countByUri(L(f,c),L(b,c),L(a,c),L(d,c))},countByUri:function(f,b,a,d){d=d||this.defaultContext;var c=this._contexts[d],g=this._entities;return c?f&&!(f=g[f])?0:b&&!(b=g[b])?0:a&&!(a=g[a])?0:f?a?this._countInIndex(c.objects,a,f,b):this._countInIndex(c.subjects,f,b,a):b?this._countInIndex(c.predicates,b,a,f):this._countInIndex(c.objects,a,f,b):0},createBlankNode:function(c){var b;if(c){b=c="_:"+c;for(var a=1;this._entities[b];){b=c+a++}}else{do{b="_:b"+this._blankNodeIndex++}while(this._entities[b])}return this._entities[b]=this._entityCount++,b}},af.Store=K}("undefined"!=typeof exports?exports:this.N3={});